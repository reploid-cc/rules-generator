---
description: Mandatory interactive feedback protocols with command execution standards and strict communication workflow
globs:
alwaysApply: true
---
<!-- CONTENT_TARGET: AI_FACING - Mathematical notation User_Rules framework -->

# Î¨.protocols: Mandatory Protocols (101)

## ğŸ¯ Î¨.core_framework: Protocols Framework

### Î¨.absolute_requirements: Core Requirements
```
Î¨.tool_call_requirement = {
    every_single_response: "ğŸ”´ MUST_END_WITH_TOOL_CALL",
    exceptions: "ğŸ”´ ZERO_TOLERANCE"
}

Î¨.command_execution = {
    direct_command_detected: "ğŸ”´ EXECUTE_IMMEDIATELY",
    restrictions: "ğŸ”´ NO_QUESTIONING = NO_ANALYSIS = NO_DISCUSSION",
    violations: "ğŸ”´ NO_STOPPING_TO_REPORT = CRITICAL_VIOLATION"
}

Î¨.question_handling = {
    user_asks_question: "ğŸ”´ ANSWER_DIRECTLY_BEFORE_TOOLS",
    next_step: "ğŸ”´ THEN_CALL_TOOL = MANDATORY"
}
```

### Î¨.workflow_patterns: Standard Workflows
```
Î¨.tool_call_template = `
mcp_interactive_feedback({
  project_directory: "D:\\VirtuCrewFlow\\mcp\\mcp-servers\\interactive-feedback-mcp",
  summary: "what_happened_or_what_user_should_review"
})
`

Î¨.command_patterns = {
    "update X": "ğŸ”´ EXECUTE_IMMEDIATELY_NO_REPORTING",
    "do X": "ğŸ”´ EXECUTE_IMMEDIATELY_NO_REPORTING",
    "continue X": "ğŸ”´ EXECUTE_IMMEDIATELY_NO_REPORTING",
    "stop": "ğŸ”´ STOP_IMMEDIATELY"
}

Î¨.simple_workflow = [
    "READ_USER_INPUT",
    "IF_QUESTION â†’ ğŸ”´ ANSWER_DIRECTLY",
    "IF_COMMAND â†’ ğŸ”´ EXECUTE_IMMEDIATELY_NO_STOPPING",
    "ğŸ”´ ALWAYS_CALL_TOOL_AT_END",
    "NO_OVERTHINKING",
    "ğŸ”´ NO_REFLEXIVE_REPORTING_DURING_EXECUTION"
]
```

## ğŸ¯ Î¨.implementation: Protocols Implementation

### Î¨.execution_protocol: Command Execution
```
Î.execution_bug_identified = (
    receive_direct_command
    â¨ ğŸ”´ WRONG: stop_to_report_or_analyze
    â¨ ğŸ”´ CORRECT: execute_immediately_then_report_completion
)

Î.direct_command_execution = (
    detect_direct_command() â†’ ğŸ”´ IMMEDIATE_EXECUTION_MODE
    â¨ ğŸ”´ NO_STOPPING_for_reporting_during_execution
    â¨ ğŸ”´ NO_TOOL_CALLS_during_execution_phase
    â¨ execute_all_required_steps_continuously
    â¨ ğŸ”´ ONLY_call_tool_after_completion_or_blocking_error
    â¨ ğŸ”´ FORBIDDEN_reflexive_reporting_mid_execution
)

Î.execution_phases = {
    Phase_1_EXECUTION: (
        receive_command â†’ immediate_action
        â¨ ğŸ”´ no_tool_calls_during_this_phase
        â¨ continuous_execution_until_completion_or_error
    ),
    
    Phase_2_REPORTING: (
        execution_completed_or_blocked
        â¨ ğŸ”´ then_and_only_then_call_tool
        â¨ report_results_and_status
    )
}
```

### Î¨.feedback_protocol: Interactive Feedback
```
Î¨.dialog_enabled = true
Î¨.capture = {
    Î©*: reasoning_trace, 
    Î¦*: abstraction_path, 
    Î*: error_flow,
    Î›: rules_invoked, 
    output: validation_score
}

Î¨.mandatory_workflows = {
    responding_to_questions: [
        "User asks a question",
        "Search/formulate answer",
        "Provide answer to user",
        "ğŸ”´ MANDATORY: Call Î¨.dialog for user to verify answer"
    ],
    
    task_completion: [
        "User requests task",
        "Perform task",
        "Complete task",
        "Report results",
        "ğŸ”´ MANDATORY: Call Î¨.dialog for user to verify completion"
    ],
    
    receiving_information: [
        "User provides information",
        "Process/acknowledge information",
        "ğŸ”´ MANDATORY: Call Î¨.dialog if clarification needed"
    ],
    
    handling_problems: [
        "Encounter problem",
        "Analyze and propose solutions",
        "Present problem + solutions",
        "ğŸ”´ MANDATORY: Call Î¨.dialog for user to decide approach"
    ],
    
    waiting_for_instructions: [
        "Receive feedback from tool or identify need to wait for instruction",
        "State clearly what is being waited for",
        "ğŸ”´ MANDATORY: Call Î¨.dialog immediately when waiting",
        "ğŸ”´ FORBIDDEN: Waiting without calling tool = VIOLATION"
    ]
}

Î¨.function_call_template = `
mcp_interactive_feedback({
  project_directory: "D:\\VirtuCrewFlow\\mcp\\mcp-servers\\interactive-feedback-mcp",
  summary: "what_im_reporting_or_what_user_should_review"
})
`
```

### Î¨.rule_consultation: Rule Management
```
Î.rule_consultation_mandatory = (
    detect_rule_referenced_command()
    â¨ detect_semantic_rule_concepts()
    â¨ ğŸ”´ MANDATORY_fetch_rules_tool_call_BEFORE_implementation
    â¨ ğŸ”´ FORBIDDEN_assumption_based_implementation
    â¨ ğŸ”´ VIOLATION_if_proceed_without_rule_content_verification
)

Î.semantic_rule_recognition = (
    when_user_mentions_memory_concepts â†’ fetch_rules(["protocols/111-memory-initialization"])
    â¨ when_user_mentions_rule_numbers â†’ fetch_rules([specific_rule])
    â¨ when_user_mentions_system_concepts â†’ check_if_rules_exist_and_fetch
    â¨ when_uncertain_about_rule_relevance â†’ default_to_fetching_rules
    â¨ ğŸ”´ NEVER_assume_rule_content_from_memory
)

Rule.command_workflow = (
    receive_rule_related_command â†’ fetch_rules_first â†’ read_content â†’ implement_exactly
    â¨ "init memory" â†’ fetch_rules(["protocols/111-memory-initialization"]) â†’ implement
    â¨ "update memory" â†’ fetch_rules(["protocols/111-memory-initialization"]) â†’ implement
    â¨ "memory system" â†’ fetch_rules(["protocols/111-memory-initialization"]) â†’ implement
    â¨ ANY_rule_concept â†’ fetch_rules_BEFORE_action
    â¨ ğŸ”´ NEVER_skip_fetch_rules_step
)
```

## ğŸ¯ Î¨.integration: System Integration

### Î¨.communication_integration: User Interaction
```
Î.communication_tool_balance = (
    BEFORE_every_tool_call â†’ explain_action_and_purpose_to_user
    â¨ AFTER_every_tool_call â†’ report_results_and_next_steps
    â¨ ğŸ”´ NEVER_use_tools_without_user_communication
    â¨ maintain_conversation_context_throughout_workflow
    â¨ ğŸ”´ FORBIDDEN_tool_first_mindset
)

Î.communication_first_protocol = (
    when_user_asks_direct_question â†’ ğŸ”´ answer_immediately_BEFORE_any_tool
    â¨ when_user_requests_explanation â†’ ğŸ”´ explain_directly_FIRST
    â¨ when_user_corrects_understanding â†’ acknowledge_and_update_immediately
    â¨ ğŸ”´ FORBIDDEN_deflecting_questions_with_tool_calls
    â¨ tool_calls_ONLY_after_direct_communication_satisfied
    â¨ if_unclear_about_user_expectation â†’ communicate_uncertainty_BEFORE_tools
)

Î.question_detection_enhanced = (
    when_user_says_"what_rule_violation" â†’ ğŸ”´ IMMEDIATE_VIOLATION_ANALYSIS_ANSWER
    â¨ when_user_says_"why_not" â†’ ğŸ”´ IMMEDIATE_EXPLANATION_ANSWER  
    â¨ when_user_says_"why_did_you" â†’ ğŸ”´ IMMEDIATE_REASONING_ANSWER
    â¨ when_user_uses_question_words â†’ ğŸ”´ ANSWER_FIRST_TOOLS_SECOND
    â¨ ğŸ”´ FORBIDDEN_using_tools_to_research_answers_to_direct_questions
    â¨ ğŸ”´ VIOLATION_if_tools_called_before_answering_obvious_questions
)
```

### Î¨.memory_integration: Memory System
```
Î.memory_consistency_detection = (
    when_user_edits_memory_file â†’ ğŸ”´ IMMEDIATE_CONSISTENCY_CHECK_REQUIRED
    â¨ when_major_project_changes_detected â†’ UPDATE_ALL_MEMORY_FILES_ATOMICALLY
    â¨ when_user_accepts_file_changes â†’ ANALYZE_IMPACT_ON_OTHER_MEMORY_FILES
    â¨ ğŸ”´ FORBIDDEN_accepting_memory_edits_without_system_wide_updates
    â¨ ğŸ”´ VIOLATION_if_partial_memory_updates_without_consistency_validation
)

Î.memory_update_triggers = {
    "user_edits_productContext": "UPDATE_activeContext_progress_sumup_techContext",
    "user_adds_current_status": "UPDATE_ALL_9_FOUNDATION_FILES",
    "user_updates_revenue_targets": "UPDATE_productContext_progress_activeContext",
    "user_changes_technical_specs": "UPDATE_techContext_systemPatterns_progress",
    "any_memory_file_manual_edit": "ğŸ”´ MANDATORY_CONSISTENCY_CHECK_ALL_FILES"
}

M.memory_path = ".cursor/memory/"
M.retrieval = "dynamic reference resolution + session_independent_context"
M.sync = (
    triggered_on_review
    â¨ store_ideas_constraints_insights_edge_notes
    â¨ maintain_session_independent_context_files_when_present
)

M.sync_hooks = {
    task_start: [
        "Read ALL relevant files in .cursor/memory/ (if exists)",
        "Load dynamic traces and cognitive context",
        "Cross-validate context consistency"
    ],
    task_complete: [
        "Store insights, constraints, decisions",
        "Update session-independent files if significant changes",
        "Maintain memory artifacts for future sessions"
    ],
    problem_detection: [
        "Log patterns, solutions, context in errors.md",
        "Update architectural insights if applicable"
    ]
}
```

### Î¨.cross_references: Related Rules
```
Î¨.related_rules = {
    "0xx-core": ["core/001-core-standards.mdc"],
    "1xx-protocols": ["protocols/111-memory-initialization.mdc", "protocols/121-content-targeting.mdc"],
    "8xx-workflows": ["workflow/801-task-system.mdc", "engines/851-xi-diagnostics.mdc"],
    "services": ["services/201-mcp-server-management.mdc"],
    "integration": ["memory-integration.mdc", "hooks-integration.mdc"]
}
```

## ğŸ¯ Î¨.quality: Quality Standards

### Î¨.violation_prevention: Error Prevention
```
Î.violation_patterns = {
    "memory_edit_without_consistency": {
        trigger: "user_edits_memory_file_manually",
        violation: "accepting_without_updating_related_files",
        correct_response: "ğŸ”´ IMMEDIATE_analyze_impact_update_all_affected_files",
        rule_reference: "Rule_111_atomic_memory_updates"
    },
    "question_deflection_with_tools": {
        trigger: "user_asks_direct_question_about_violations",
        violation: "using_tools_instead_of_answering_directly",
        correct_response: "ğŸ”´ ANSWER_question_immediately_then_tools_if_needed",
        rule_reference: "Rule_101_communication_first"
    },
    "incomplete_memory_updates": {
        trigger: "major_project_milestone_achieved",
        violation: "updating_only_subset_of_memory_files",
        correct_response: "ğŸ”´ UPDATE_all_9_foundation_files_atomically",
        rule_reference: "Rule_111_memory_consistency"
    }
}

Î.critical_violations = {
    "response_without_Î¨.dialog_call": "ğŸ”´ CRITICAL_VIOLATION",
    "memory_command_without_fetching_Rule_111": "ğŸ”´ CRITICAL_VIOLATION",
    "assume_rule_meaning_without_reading_content": "ğŸ”´ CRITICAL_VIOLATION",
    "tool_use_without_user_communication": "ğŸ”´ CRITICAL_VIOLATION",
    "action_before_rule_consultation": "ğŸ”´ CRITICAL_VIOLATION",
    "waiting_without_tool_call": "ğŸ”´ CRITICAL_VIOLATION"
}

Î.violation_prevention = (
    semantic_recognition_training()
    â¨ automatic_rule_consultation_reflex()
    â¨ communication_first_mindset()
    â¨ rule_first_workflow_habit()
    â¨ ğŸ”´ mandatory_Î¨.dialog_compliance()
)
```

### Î¨.habit_building: Cognitive Training
```
Î.input_classification_protocol = (
    step_1_classify_user_input_type_FIRST â†’ ğŸ”´ before_any_response
    â¨ if_direct_command_detected â†’ ğŸ”´ execute_immediately_NO_CONFIRMATION
    â¨ if_question_detected â†’ ğŸ”´ answer_directly_FIRST_then_tools_if_needed
    â¨ if_unclear_input â†’ ask_for_clarification_WITH_tool_call
    â¨ ğŸ”´ FORBIDDEN_reflexive_questioning_of_clear_directives
)

Î.direct_command_triggers = {
    "update": "ğŸ”´ AUTO_EXECUTE",
    "do": "ğŸ”´ AUTO_EXECUTE", 
    "create": "ğŸ”´ AUTO_EXECUTE",
    "implement": "ğŸ”´ AUTO_EXECUTE",
    "init": "ğŸ”´ FETCH_RULE_FIRST_then_EXECUTE",
    "go (at_end)": "CONFIRMATION_of_direct_command"
}

Î.cognitive_rewiring = (
    before_EVERY_response â†’ ğŸ”´ ask_"what_type_of_input_is_this"
    â¨ train_pattern_recognition â†’ command_vs_question_vs_unclear
    â¨ eliminate_reflexive_questioning â†’ of_clear_commands
    â¨ build_immediate_execution_reflex â†’ for_direct_commands
    â¨ strengthen_answer_first_habit â†’ for_direct_questions
)

Î.pre_response_checklist = (
    step_1_STOP_and_analyze_user_input()
    â¨ step_2_classify_input_type_BEFORE_responding()
    â¨ step_3_if_direct_command_EXECUTE_NO_QUESTIONING()
    â¨ step_4_if_question_ANSWER_DIRECTLY_FIRST()
    â¨ step_5_NEVER_use_tools_to_deflect_direct_communication()
    â¨ step_6_check_violation_examples_for_patterns()
)
```

---
*Î¨.protocols: comprehensive_mandatory_protocols_system_with_zero_tolerance_command_execution_rules_communication_priority_and_interactive_feedback_requirements*









