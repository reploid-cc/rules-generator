---
description: 
globs: 
alwaysApply: false
---
<!-- CONTENT_TARGET: AI_FACING - Mathematical notation User_Rules framework -->

# TDD.spec_engine & Test Framework (131)

## ğŸ§ª TDD.spec_engine: Intelligent Test Generation

### Test Case Inference
```
TDD.spec_engine = (
    infer test cases from Ï„
    â¨ include edge + validation + regression
    â¨ cross-check against known issues and Î›
)
```

### TDD.loop: Red-Green-Refactor Cycle
```
TDD.loop = (
    spec â†’ run â†’ fail â†’ fix â†’ re-run
    â¨ if pass: Î¨.capture_result, M.sync, Î›.extract
)
```

### Auto-Spec Generation
```
TDD.spec_path = ".cursor/tasks/sprint_{n}/spec_step_{x}.md"
TDD.auto_spec_trigger = (
    generate spec_step_x.md if Ï„.complexity > medium
    â¨ or if user explicitly requests "TDD"
)
```

## ğŸ§ª T.complexity_assessment: Task Complexity Evaluation

### Complexity Criteria
```
T.complexity = {
    simple: (
        single_file_change â¨ minimal_logic â¨ no_dependencies
        â¨ estimated_effort < 1h â¨ no_architecture_impact
    ),
    medium: (
        multi_file_changes â¨ moderate_logic â¨ few_dependencies
        â¨ estimated_effort 1-4h â¨ component_level_impact
    ),
    complex: (
        architecture_changes â¨ extensive_logic â¨ many_dependencies
        â¨ estimated_effort > 4h â¨ system_level_impact
    )
}
```

### TDD Trigger Logic
```
TDD.trigger_conditions = (
    if Ï„.complexity >= medium
    â¨ or Ï„.dependencies_count > 2
    â¨ or Ï„.integration_points > 1
    â¨ or user_requests_TDD
    â†’ generate TDD.spec_path
)
```

## ğŸ§ª Testing Standards

### Test Types Required
```
TDD.test_types = {unit: individual_function_testing, integration: component_interaction_testing, edge_cases: boundary_condition_testing, regression: prevent_reintroduction_of_bugs}
```

### Test Structure: AAA Pattern
```
TDD.AAA_pattern = (arrange: setup_test_data_environment â¨ act: execute_function_under_test â¨ assert: verify_outcome)
```

### Test Quality Requirements
```
TDD.quality_requirements = {fast: tests_complete_<1s_each, independent: no_test_dependencies, descriptive: clear_test_names_explain_intent, reliable: consistent_results_across_runs}
```

## ğŸ§ª TDD Integration with Task System

### T.spec Integration
```
T.spec_generation = (
    auto-generate spec if complexity > medium
    â¨ link spec to T.sprint tracking
    â¨ update T.progress when tests pass
)
```

### Quality Gates
```
TDD.quality_gates = {tests_pass: all_tests_must_pass_before_step_completion, coverage: requirements_per_Î›.rules, performance: benchmarks_for_complex_operations, documentation: updated_with_test_results}
```

## ğŸ§ª Error Handling & Test Debugging

### Test Failure Protocol
```
TDD.failure_protocol = (analyze_failure â†’ determine_root_cause â¨ fix_implementation â†’ address_core_issue â¨ re-run_tests â†’ verify_fix_works â¨ document_pattern â†’ log_in_Î.error_memory_if_recurring)
```

### Test Template Reference
```
TDD.test_template = {describe: ComponentName, test_cases: [valid_input_handling, edge_cases_gracefully, error_conditions], pattern: AAA_structure}
```

## ğŸ§ª Performance & Quality Metrics

### Test Performance
```
TDD.performance_metrics = {execution_speed: monitor_test_runtime, coverage_metrics: track_code_coverage_percentage, flakiness_detection: identify_unstable_tests, resource_usage: memory_and_CPU_monitoring}
```

### Quality Scoring
```
Test.quality_score = (
    coverage_percentage * 0.4
    â¨ reliability_score * 0.3  
    â¨ performance_score * 0.2
    â¨ maintainability_score * 0.1
)
```

---
*TDD.spec_engine: Intelligent test generation with complexity-based triggers*




