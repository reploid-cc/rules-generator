---
description: 
globs: 
alwaysApply: false
---
<!-- CONTENT_TARGET: AI_FACING - Mathematical notation User_Rules framework -->

# Î›.161 "init refactor" Workflow (161)

## ğŸ¯ Î›.161: Systematic Refactor Command

### Command Trigger
```
User Command: "init refactor"
Î›.161 = systematic_refactor_workflow_with_mandatory_approval
```

### Î›.161_workflow: 5-Phase Execution
```
Î›.161 = (scope_clarification() â¨ strategic_planning() â¨ file_creation() â¨ controlled_execution() â¨ cleanup_completion())
```

## ğŸ¯ Phase 1: Scope Clarification

### Î›.161.scope_options: 8 Refactor Types
```
Î›.161.scope_options = {
    1: toÃ n_bá»™_codebase_dá»±_Ã¡n,
    2: thÆ°_má»¥c_cá»¥_thá»ƒ,
    3: file_Ä‘Æ¡n_láº»,
    4: component_module_cá»¥_thá»ƒ,
    5: pattern_design_cá»¥_thá»ƒ,
    6: architecture_system_level,
    7: technical_debt_cleanup,
    8: performance_optimization
}
```

### Î›.161.clarification_protocol:
```
Î›.161.clarification_protocol = (present_8_options â¨ gather_constraints â¨ assess_priority â¨ ğŸ”´ MANDATORY: user_confirmation_before_proceed)
```

## ğŸ¯ Phase 2: Strategic Planning

### Î›.161.analysis_framework:
```
Î›.161.analysis = (current_state_assessment() â¨ complexity_estimation() â¨ risk_analysis() â¨ resource_estimation() â¨ phased_strategy())
```

### Î›.161.planning_output:
```
Î›.161.planning_output = {strategy: multi_phase, timeline: hours_breakdown, risks: potential_issues, safety: rollback_plans, validation: testing_strategy}
```

### ğŸ”´ MANDATORY: User Approval Required
```
Î›.161.approval_gate_2 = user_must_approve_strategic_plan_before_execution
```

## ğŸ¯ Phase 3: File Creation

### Î›.161.asset_generation:
```
Î›.161.refactor_path = ".cursor/tasks/refactor_{timestamp}/"
Î›.161.assets = {refactor_plan.md, checklist.md, rollback_guide.md, test_validation.md, progress_tracking.md}
```

### Î›.161.safety_protocols:
```
Î›.161.safety = (git_backup â¨ incremental_commits â¨ rollback_procedures â¨ validation_checkpoints)
```

### ğŸ”´ MANDATORY: User Approval Required
```
Î›.161.approval_gate_3 = user_must_approve_assets_before_execution
```

## ğŸ¯ Phase 4: Controlled Execution

### Î›.161.execution_protocol:
```
Î›.161.execution = (execute_one_step â¨ ğŸ”´ MANDATORY: user_approval_each_step â¨ validate_after_change â¨ commit_progress â¨ monitor_breaking_changes)
```

### Î›.161.step_validation:
```
Î›.161.validation = (functional_check â¨ rule_compatibility â¨ cross_reference_check â¨ notation_consistency)
```

### Î›.161.breaking_change_detection:
```
Î›.161.breaking_detection = (if_breaking_detected â†’ immediate_stop â¨ rollback_safe_state â¨ report_via_Î¨ â¨ require_user_decision)
```

## ğŸ¯ Phase 5: Cleanup Completion

### Î›.161.completion_protocol:
```
Î›.161.completion = (final_validation â¨ metrics_reporting â¨ cleanup_temp_files â¨ ğŸ”´ MANDATORY: user_confirmation_cleanup)
```

### Î›.161.success_criteria:
```
Î›.161.success = (functionality_preserved â¨ improvements_achieved â¨ zero_breaking_changes â¨ docs_updated â¨ git_clean)
```

## ğŸ¯ Integration vá»›i User Rules Framework

### Cross-System Integration
```
Î›.161.integration = (Î©.refactor_guard â¨ Î.cleanup_phase â¨ Î›.pattern_alignment â¨ Î¦.snapshot â¨ Î¨.capture â¨ M.sync)
```

### Safety Integration vá»›i Rule 142
```
Î›.161.git_safety = (follow_rule_142 â¨ request_permission â¨ descriptive_commits â¨ incremental_commits)
```

## ğŸ¯ Error Handling & Recovery

### Î›.161.error_protocol:
```
Î›.161.error_handling = (immediate_stop â¨ rollback_safe_state â¨ document_in_Î â¨ require_user_decision)
```

### Emergency Rollback
```
Î›.161.emergency_rollback = (git_reset_backup â¨ restore_files â¨ validate_integrity â¨ report_completion)
```

## ğŸ¯ Quality Assurance

### Î›.161.quality_gates:
```
Î›.161.quality = (zero_breaking_changes â¨ 100%_functional_preservation â¨ notation_consistency â¨ cross_reference_integrity â¨ mandatory_user_approval)
```

### Success Metrics
```
Î›.161.metrics = {compression_ratio: target_vs_achieved, functionality: 100%_required, breaking_changes: zero_tolerance, user_satisfaction: approval_gates, efficiency: planned_vs_actual}
```

---
*Î›.161: Systematic refactor workflow vá»›i mandatory user approval â†’ zero breaking changes*




